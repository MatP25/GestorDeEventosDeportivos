@page "/login"
@rendermode InteractiveServer
@inject NavigationManager Nav

@code {
    private string? ErrorMsg { get; set; }

    protected override void OnInitialized()
    {
        var uri = new Uri(Nav.Uri);
        var query = System.Web.HttpUtility.ParseQueryString(uri.Query);
        var err = query.Get("error");
        if (!string.IsNullOrWhiteSpace(err))
        {
            ErrorMsg = err;
        }
    }
}

<PageTitle>Iniciar sesión</PageTitle>

<div class="container text-center">
    <h3 class="mb-3">Iniciar sesión</h3>

    @if (!string.IsNullOrEmpty(ErrorMsg))
    {
        <div class="alert alert-danger" role="alert">@ErrorMsg</div>
    }

    <form method="post" action="/auth/login" class="form-container container">
        <AntiforgeryToken />

        <div class="form-group row">
            <label class="form-label text-start">
                Email:
                <input class="form-control" type="email" name="Email" required oninvalid="this.setCustomValidity('El email debe contener &#64;')" oninput="this.setCustomValidity('')" />
            </label>
        </div>
        <div class="form-group row">
            <label class="form-label text-start">
                Contraseña:
                <input class="form-control" type="password" name="Password" required />
            </label>
        </div>
        <div class="mt-2">
            <button type="submit" class="btn btn-primary">Entrar</button>
        </div>
    </form>
</div>
